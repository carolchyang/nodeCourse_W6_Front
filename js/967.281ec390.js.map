{"version":3,"file":"js/967.281ec390.js","mappings":"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","sources":["webpack://node_final/./src/scripts/api.js","webpack://node_final/./src/stores/userStore.js","webpack://node_final/./src/views/LayoutView.vue","webpack://node_final/./src/components/NavbarComponent.vue","webpack://node_final/./src/components/NavbarComponent.vue?3cc2","webpack://node_final/./src/components/AsideComponent.vue","webpack://node_final/./src/components/AsideComponent.vue?207e","webpack://node_final/./src/views/LayoutView.vue?6424"],"sourcesContent":["import axios from \"axios\";\n\nconst api = process.env.VUE_APP_API;\n\n// Users\nexport const apiUserSignUp = (data) => axios.post(`${api}/user/sign_up`, data);\nexport const apiUserSignIn = (data) => axios.post(`${api}/user/sign_in`, data);\nexport const apiUpdatePassword = (data) =>\n  axios.post(`${api}/user/updatePassword`, data);\nexport const apiGetProfile = () => axios.get(`${api}/user/profile`);\nexport const apiUpdateProfile = (data) =>\n  axios.patch(`${api}/user/profile`, data);\n\n// Post\nexport const apiGetPosts = (data) =>\n  axios.get(`${api}/posts`, { params: data });\nexport const apiGetPost = (id) => axios.get(`${api}/post/${id}`);\nexport const apiCreatePost = (data) => axios.post(`${api}/post`, data);\nexport const apiDelPost = (id) => axios.delete(`${api}/post/${id}`);\n","import router from \"@/router\";\nimport { defineStore } from \"pinia\";\nimport { apiGetProfile } from \"@/scripts/api\";\nimport statusStore from \"./statusStore\";\nimport { clearToken } from \"@/scripts/methods\";\n\nconst status = statusStore();\n\nexport default defineStore(\"userStore\", {\n  state: () => {\n    return {\n      // 個人資料\n      profile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n        _id: \"\",\n      },\n      // 個人資料暫存表格\n      tempProfile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n        _id: \"\",\n      },\n    };\n  },\n  actions: {\n    // 取得用戶資料\n    getProfile() {\n      status.isLoading = true;\n      apiGetProfile()\n        .then((res) => {\n          this.profile = Object.assign({}, res.data.data);\n          this.tempProfile = Object.assign({}, res.data.data);\n          status.isLoading = false;\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content:\n              err.response?.data?.message || \"取得個人資料失敗，請重新登入\",\n          });\n          status.isLoading = false;\n\n          // 若驗證個人資料失敗則強制登出\n          clearToken();\n          router.push(\"/signin\");\n        });\n    },\n    // 更新 profile 資料\n    updateProfileData(data) {\n      this.profile = Object.assign({}, data);\n      this.tempProfile = Object.assign({}, data);\n    },\n  },\n});\n","<template>\n  <div v-if=\"checkSuccess\">\n    <NavbarComponent @sign-out=\"signOut\"></NavbarComponent>\n    <main class=\"container pt-11 pb-14 pb-lg-11\">\n      <div class=\"row\">\n        <div class=\"col-12 col-lg-8\">\n          <router-view :key=\"$route.fullPath\"></router-view>\n        </div>\n\n        <div class=\"col-lg-4 position-relative\">\n          <AsideComponent></AsideComponent>\n        </div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport NavbarComponent from \"@/components/NavbarComponent\";\nimport AsideComponent from \"@/components/AsideComponent\";\nimport { mapActions } from \"pinia\";\nimport statusStore from \"@/stores/statusStore\";\nimport userStore from \"@/stores/userStore\";\nimport { getToken, clearToken } from \"@/scripts/methods\";\n\nexport default {\n  name: \"LayoutView\",\n  data() {\n    return {\n      checkSuccess: false,\n    };\n  },\n  methods: {\n    // 確認登入狀態\n    checkSignIn() {\n      // 取得 cookie 中的 token\n      const token = getToken();\n\n      // 若有 token 則登入，反之轉為登入頁面\n      if (token) {\n        this.checkSuccess = true;\n        this.$http.defaults.headers.common.Authorization = `Bearer ${token}`;\n\n        this.getProfile();\n      } else {\n        this.checkSuccess = false;\n        this.pushMessage({\n          style: \"danger\",\n          content: \"請先登入\",\n        });\n        this.$router.push(\"/signin\");\n      }\n    },\n    // 登出\n    signOut() {\n      clearToken();\n      this.checkSuccess = false;\n      this.$router.push(\"/signin\");\n    },\n    ...mapActions(statusStore, [\"pushMessage\"]),\n    ...mapActions(userStore, [\"getProfile\"]),\n  },\n  created() {\n    this.checkSignIn();\n  },\n  components: {\n    NavbarComponent,\n    AsideComponent,\n  },\n};\n</script>\n","<template>\n  <div class=\"navbar\">\n    <div class=\"container d-flex justify-content-between align-items-center\">\n      <router-link to=\"/\" class=\"navbarBrand\">MetaWall</router-link>\n      <div class=\"d-flex align-items-center\">\n        <img\n          :src=\"profile?.photo\"\n          class=\"thumbnail thumbnail-sm\"\n          v-if=\"profile?.photo\"\n        />\n        <img\n          src=\"../assets/images/user_default.png\"\n          class=\"thumbnail thumbnail-sm\"\n          v-else\n        />\n        <div class=\"dropdown\">\n          <a\n            class=\"dropdown-toggle ms-3 px-2 border-bottom border-2 text-dark fw-bolder\"\n            href=\"#\"\n            role=\"button\"\n            id=\"dropdownMenuLink\"\n            data-bs-toggle=\"dropdown\"\n            aria-expanded=\"false\"\n          >\n            {{ profile?.name }}\n          </a>\n          <ul\n            class=\"dropdown-menu dropdown-menu-end customShadow text-center\"\n            aria-labelledby=\"dropdownMenuLink\"\n          >\n            <li class=\"bg-white border border-2 border-bottom-0\">\n              <a href=\"#\" class=\"dropdown-item\"> 我的貼文牆 </a>\n            </li>\n            <li class=\"bg-white border border-2 border-bottom-0\">\n              <router-link to=\"/\" class=\"dropdown-item\">全體動態牆</router-link>\n            </li>\n            <li class=\"bg-white border border-2 border-bottom-0\">\n              <router-link to=\"/profile\" class=\"dropdown-item\">\n                修改個人資料\n              </router-link>\n            </li>\n            <li class=\"bg-white border border-2\">\n              <a\n                href=\"#\"\n                class=\"dropdown-item\"\n                @click.prevent=\"$emit('sign-out')\"\n              >\n                登出\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"pinia\";\nimport userStore from \"@/stores/userStore\";\n\nexport default {\n  name: \"NavbarComponent\",\n  computed: {\n    ...mapState(userStore, [\"profile\"]),\n  },\n};\n</script>\n","import { render } from \"./NavbarComponent.vue?vue&type=template&id=26edb2b8\"\nimport script from \"./NavbarComponent.vue?vue&type=script&lang=js\"\nexport * from \"./NavbarComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\主線任務\\\\第六週主線\\\\nodeCourse_W6_Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <aside class=\"aside\">\n    <div class=\"asideContent\">\n      <router-link\n        to=\"/createpost\"\n        class=\"effectBtn d-none d-lg-block btn btn-primary w-100 mb-6 fw-bold\"\n      >\n        張貼動態\n      </router-link>\n      <ul class=\"asideList\">\n        <li class=\"mb-lg-8\">\n          <a href=\"#\" class=\"asideLink\">\n            <img\n              :src=\"profile?.photo\"\n              class=\"thumbnail thumbnail-xl\"\n              v-if=\"profile?.photo\"\n            />\n            <img\n              src=\"../assets/images/user_default.png\"\n              class=\"thumbnail thumbnail-xl\"\n              v-else\n            />\n            <h5 class=\"d-none d-lg-block ms-4 fw-bolder\">\n              {{ profile?.name }} 的貼文牆\n            </h5>\n          </a>\n        </li>\n        <li class=\"mb-lg-8\">\n          <router-link to=\"/\" class=\"asideLink\">\n            <div class=\"asideLinkIcon\">\n              <i class=\"bi bi-house-door\"></i>\n            </div>\n            <h5 class=\"d-none d-lg-block ms-4 fw-bolder\">全體動態牆</h5>\n          </router-link>\n        </li>\n        <li class=\"mb-lg-8\">\n          <a href=\"#\" class=\"asideLink\">\n            <div class=\"asideLinkIcon\">\n              <i class=\"bi bi-bell\"></i>\n            </div>\n            <h5 class=\"d-none d-lg-block ms-4 fw-bolder\">追蹤名單</h5>\n          </a>\n        </li>\n        <li>\n          <a href=\"#\" class=\"asideLink\">\n            <div class=\"asideLinkIcon\">\n              <i class=\"bi bi-hand-thumbs-up\"></i>\n            </div>\n            <h5 class=\"d-none d-lg-block ms-4 fw-bolder\">我按讚的文章</h5>\n          </a>\n        </li>\n        <li class=\"d-lg-none\">\n          <router-link to=\"/createpost\" class=\"asideLink\">\n            <div class=\"asideLinkIcon\">\n              <i class=\"bi bi-plus-lg\"></i>\n            </div>\n          </router-link>\n        </li>\n      </ul>\n    </div>\n  </aside>\n</template>\n\n<script>\nimport { mapState } from \"pinia\";\nimport userStore from \"@/stores/userStore\";\n\nexport default {\n  name: \"AsideComponent\",\n  computed: {\n    ...mapState(userStore, [\"profile\"]),\n  },\n};\n</script>\n","import { render } from \"./AsideComponent.vue?vue&type=template&id=b813cf8a\"\nimport script from \"./AsideComponent.vue?vue&type=script&lang=js\"\nexport * from \"./AsideComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\主線任務\\\\第六週主線\\\\nodeCourse_W6_Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./LayoutView.vue?vue&type=template&id=72dc612e\"\nimport script from \"./LayoutView.vue?vue&type=script&lang=js\"\nexport * from \"./LayoutView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\主線任務\\\\第六週主線\\\\nodeCourse_W6_Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","process","apiUserSignUp","data","axios","apiUserSignIn","apiUpdatePassword","apiGetProfile","apiUpdateProfile","apiGetPosts","params","apiGetPost","id","apiCreatePost","apiDelPost","status","statusStore","defineStore","state","profile","name","photo","gender","_id","tempProfile","actions","getProfile","isLoading","then","res","this","Object","assign","catch","err","pushMessage","style","content","response","message","clearToken","router","updateProfileData","class","$data","_createElementBlock","_hoisted_1","_createVNode","_component_NavbarComponent","onSignOut","$options","_createElementVNode","_createBlock","_component_router_view","key","_ctx","fullPath","_component_AsideComponent","src","_imports_0","href","role","_component_router_link","to","_toDisplayString","_hoisted_10","onClick","computed","mapState","userStore","__exports__","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_16","checkSuccess","methods","checkSignIn","token","getToken","$http","defaults","headers","common","Authorization","$router","push","signOut","mapActions","created","components","NavbarComponent","AsideComponent","render"],"sourceRoot":""}