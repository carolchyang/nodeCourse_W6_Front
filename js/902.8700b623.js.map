{"version":3,"file":"js/902.8700b623.js","mappings":"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","sources":["webpack://node_final/./src/scripts/api.js","webpack://node_final/./src/stores/modalStore.js","webpack://node_final/./src/stores/userStore.js","webpack://node_final/./src/views/front/ProfileView.vue","webpack://node_final/./src/components/MsgModalComponent.vue","webpack://node_final/./src/components/MsgModalComponent.vue?431b","webpack://node_final/./src/views/front/ProfileView.vue?5182"],"sourcesContent":["import axios from \"axios\";\n\nconst api = process.env.VUE_APP_API;\n\n// Users\nexport const apiUserSignUp = (data) => axios.post(`${api}/user/sign_up`, data);\nexport const apiUserSignIn = (data) => axios.post(`${api}/user/sign_in`, data);\nexport const apiUpdatePassword = (data) =>\n  axios.post(`${api}/user/updatePassword`, data);\nexport const apiGetProfile = () => axios.get(`${api}/user/profile`);\nexport const apiUpdateProfile = (data) =>\n  axios.patch(`${api}/user/profile`, data);\n\n// Post\nexport const apiGetPosts = (data) =>\n  axios.get(`${api}/posts`, { params: data });\nexport const apiGetPost = (id) => axios.get(`${api}/post/${id}`);\nexport const apiCreatePost = (data) => axios.post(`${api}/post`, data);\nexport const apiDelPost = (id) => axios.delete(`${api}/post/${id}`);\n","import { defineStore } from \"pinia\";\nimport { bsModal } from \"@/scripts/methods\";\n\nexport default defineStore(\"modalStore\", {\n  state: () => {\n    return {\n      modal: {\n        type: \"\",\n        id: \"\",\n        title: \"\",\n        content: \"\",\n      },\n    };\n  },\n  actions: {\n    // 開啟 DelModal\n    toggleDelModal(item) {\n      this.modal = item;\n      this.bsModal = bsModal(\"delModal\");\n      this.bsModal.show();\n    },\n    // 開啟 MsgModal\n    toggleMsgModal(item) {\n      this.modal = item;\n      this.bsModal = bsModal(\"msgModal\");\n      this.bsModal.show();\n    },\n    // 重置 DelModal\n    closeDelModal() {\n      this.modal = {\n        type: \"\",\n        id: \"\",\n        title: \"\",\n        content: \"\",\n      };\n      this.bsModal.hide();\n    },\n  },\n});\n","import router from \"@/router\";\nimport { defineStore } from \"pinia\";\nimport { apiGetProfile } from \"@/scripts/api\";\nimport statusStore from \"./statusStore\";\nimport { clearToken } from \"@/scripts/methods\";\n\nconst status = statusStore();\n\nexport default defineStore(\"userStore\", {\n  state: () => {\n    return {\n      // 個人資料\n      profile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n        _id: \"\",\n      },\n      // 個人資料暫存表格\n      tempProfile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n        _id: \"\",\n      },\n    };\n  },\n  actions: {\n    // 取得用戶資料\n    getProfile() {\n      status.isLoading = true;\n      apiGetProfile()\n        .then((res) => {\n          this.profile = Object.assign({}, res.data.data);\n          this.tempProfile = Object.assign({}, res.data.data);\n          status.isLoading = false;\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content:\n              err.response?.data?.message || \"取得個人資料失敗，請重新登入\",\n          });\n          status.isLoading = false;\n\n          // 若驗證個人資料失敗則強制登出\n          clearToken();\n          router.push(\"/signin\");\n        });\n    },\n    // 更新 profile 資料\n    updateProfileData(data) {\n      this.profile = Object.assign({}, data);\n      this.tempProfile = Object.assign({}, data);\n    },\n  },\n});\n","<template>\r\n  <h1 class=\"header\">修改個人資料</h1>\r\n\r\n  <nav class=\"navTab\">\r\n    <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\r\n      <button\r\n        class=\"nav-link active\"\r\n        id=\"nav-profile-tab\"\r\n        data-bs-toggle=\"tab\"\r\n        data-bs-target=\"#nav-profile\"\r\n        type=\"button\"\r\n        role=\"tab\"\r\n        aria-controls=\"nav-profile\"\r\n        aria-selected=\"true\"\r\n        @click=\"toggleForm('profile')\"\r\n      >\r\n        修改資料\r\n      </button>\r\n      <button\r\n        class=\"nav-link\"\r\n        id=\"nav-password-tab\"\r\n        data-bs-toggle=\"tab\"\r\n        data-bs-target=\"#nav-password\"\r\n        type=\"button\"\r\n        role=\"tab\"\r\n        aria-controls=\"nav-password\"\r\n        aria-selected=\"false\"\r\n        @click=\"toggleForm('password')\"\r\n      >\r\n        重設密碼\r\n      </button>\r\n    </div>\r\n  </nav>\r\n  <div class=\"tab-content navTabContent\" id=\"nav-tabContent\">\r\n    <div\r\n      class=\"tab-pane fade show active px-4 py-8 px-md-8\"\r\n      id=\"nav-profile\"\r\n      role=\"tabpanel\"\r\n      aria-labelledby=\"nav-profile-tab\"\r\n    >\r\n      <VForm\r\n        v-slot=\"{ errors, meta }\"\r\n        id=\"profileForm\"\r\n        enctype=\"multipart/form-data\"\r\n        @submit=\"updateProfile\"\r\n        ref=\"profileForm\"\r\n      >\r\n        <div\r\n          class=\"bgCoverRounded mx-auto mb-4\"\r\n          :style=\"{ backgroundImage: 'url(' + profile?.photo + ')' }\"\r\n          v-if=\"profile?.photo\"\r\n        ></div>\r\n        <div class=\"bgCoverRounded mx-auto mb-4 profileUserPhoto\" v-else></div>\r\n\r\n        <div class=\"mb-4\">\r\n          <label for=\"photo\" class=\"form-label\">圖片連結</label>\r\n          <VField\r\n            type=\"text\"\r\n            id=\"photo\"\r\n            placeholder=\"請輸入圖片連結\"\r\n            name=\"圖片連結\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['圖片連結'] }\"\r\n            rules=\"url\"\r\n            v-model=\"tempProfile.photo\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"圖片連結\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n          <label for=\"nickname\" class=\"form-label\">暱稱</label>\r\n          <VField\r\n            type=\"text\"\r\n            id=\"name\"\r\n            placeholder=\"請輸入暱稱\"\r\n            name=\"暱稱\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['暱稱'] }\"\r\n            rules=\"min:2\"\r\n            v-model=\"tempProfile.name\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"暱稱\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n        <div class=\"mb-8\">\r\n          <h3 class=\"mb-2 h5 fw-normal\">性別</h3>\r\n          <div class=\"form-check form-check-inline me-6\">\r\n            <VField\r\n              type=\"radio\"\r\n              id=\"male\"\r\n              name=\"性別\"\r\n              class=\"form-check-input\"\r\n              value=\"male\"\r\n              v-model=\"tempProfile.gender\"\r\n            ></VField>\r\n\r\n            <label class=\"form-check-label\" for=\"male\">男生</label>\r\n          </div>\r\n          <div class=\"form-check form-check-inline\">\r\n            <VField\r\n              type=\"radio\"\r\n              id=\"female\"\r\n              name=\"性別\"\r\n              class=\"form-check-input\"\r\n              value=\"female\"\r\n              v-model=\"tempProfile.gender\"\r\n            ></VField>\r\n            <label class=\"form-check-label\" for=\"female\">女生</label>\r\n          </div>\r\n        </div>\r\n        <small class=\"d-block mb-4 text-center text-danger\"></small>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          class=\"effectBtn btn btn-primary w-100\"\r\n          :disabled=\"!meta.valid\"\r\n        >\r\n          送出更新\r\n        </button>\r\n      </VForm>\r\n    </div>\r\n    <div\r\n      class=\"tab-pane fade px-4 py-8 px-md-8\"\r\n      id=\"nav-password\"\r\n      role=\"tabpanel\"\r\n      aria-labelledby=\"nav-password-tab\"\r\n    >\r\n      <VForm\r\n        v-slot=\"{ errors, meta }\"\r\n        @submit=\"updatePassword\"\r\n        ref=\"passwordForm\"\r\n      >\r\n        <div class=\"mb-4\">\r\n          <label for=\"password\" class=\"form-label\">密碼</label>\r\n          <VField\r\n            type=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"請輸入密碼\"\r\n            name=\"密碼\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['密碼'] }\"\r\n            rules=\"required|password:8\"\r\n            v-model=\"tempPassword.password\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"密碼\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n        <div class=\"mb-8\">\r\n          <label for=\"confirmed\" class=\"form-label\">確認密碼</label>\r\n          <VField\r\n            type=\"password\"\r\n            id=\"confirmed\"\r\n            placeholder=\"請再次輸入密碼\"\r\n            name=\"確認密碼\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['確認密碼'] }\"\r\n            rules=\"required|confirmed:@密碼\"\r\n            v-model=\"tempPassword.confirmPassword\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"確認密碼\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          class=\"effectBtn btn btn-primary w-100\"\r\n          :disabled=\"!meta.valid\"\r\n        >\r\n          重設密碼\r\n        </button>\r\n      </VForm>\r\n    </div>\r\n  </div>\r\n\r\n  <MsgModalComponent>\r\n    <template #default>\r\n      <h3 class=\"mb-5\">{{ modal.title }}</h3>\r\n      <p class=\"text-gray-700\">{{ modal.content }}</p>\r\n    </template>\r\n  </MsgModalComponent>\r\n</template>\r\n\r\n<script>\r\nimport { apiUpdateProfile, apiUpdatePassword } from \"@/scripts/api\";\r\nimport MsgModalComponent from \"@/components/MsgModalComponent.vue\";\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport statusStore from \"@/stores/statusStore\";\r\nimport userStore from \"@/stores/userStore\";\r\nimport modalStore from \"@/stores/modalStore\";\r\n\r\nexport default {\r\n  name: \"ProfileView\",\r\n  data() {\r\n    return {\r\n      // 更新密碼暫存表格\r\n      tempPassword: {\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 切換表單\r\n    toggleForm(name) {\r\n      if (name == \"profile\") {\r\n        this.$refs.passwordForm.resetForm();\r\n      } else {\r\n        this.getProfile();\r\n      }\r\n    },\r\n    // 更新個人資料\r\n    updateProfile() {\r\n      this.toggleLoading(true);\r\n      apiUpdateProfile(this.tempProfile)\r\n        .then((res) => {\r\n          // 更新用戶 data 資料\r\n          this.updateProfileData(res.data.data.user);\r\n\r\n          // 開啟 msgModal 提示訊息\r\n          this.toggleMsgModal({\r\n            title: \"更新個人資料\",\r\n            content: \"已成功更新您的個人資料~\",\r\n          });\r\n          this.toggleLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          this.pushMessage({\r\n            style: \"danger\",\r\n            content: err.response?.data?.message || \"更新失敗\",\r\n          });\r\n          this.toggleLoading(false);\r\n        });\r\n    },\r\n    // 更新密碼\r\n    updatePassword() {\r\n      this.toggleLoading(true);\r\n      apiUpdatePassword(this.tempPassword)\r\n        .then(() => {\r\n          // 重置表單\r\n          this.$refs.passwordForm.resetForm();\r\n\r\n          // 開啟 msgModal 提示訊息\r\n          this.toggleMsgModal({\r\n            title: \"更新密碼成功\",\r\n            content: \"下次登入記得使用新密碼喔~\",\r\n          });\r\n\r\n          this.toggleLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          this.pushMessage({\r\n            style: \"danger\",\r\n            content: err.response?.data?.message || \"更新密碼失敗\",\r\n          });\r\n          this.toggleLoading(false);\r\n        });\r\n    },\r\n    ...mapActions(statusStore, [\"pushMessage\", \"toggleLoading\"]),\r\n    ...mapActions(userStore, [\"getProfile\", \"updateProfileData\"]),\r\n    ...mapActions(modalStore, [\"toggleMsgModal\"]),\r\n  },\r\n  computed: {\r\n    ...mapState(userStore, [\"profile\", \"tempProfile\"]),\r\n    ...mapState(modalStore, [\"modal\"]),\r\n  },\r\n  components: {\r\n    MsgModalComponent,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.profileUserPhoto {\r\n  background-image: url(\"@/assets/images/user_default.png\");\r\n}\r\n</style>\r\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"msgModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"msgModalLabel\"\n    data-bs-backdrop=\"static\"\n    data-bs-keyboard=\"false\"\n    aria-hidden=\"false\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-body pb-0 text-center\">\n          <slot></slot>\n        </div>\n        <div class=\"modal-footer justify-content-center\">\n          <button\n            type=\"button\"\n            class=\"btn btn-primary py-2 px-8\"\n            data-bs-dismiss=\"modal\"\n          >\n            確定\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"MsgModalComponent\",\n};\n</script>\n","import { render } from \"./MsgModalComponent.vue?vue&type=template&id=ffeb5a5e\"\nimport script from \"./MsgModalComponent.vue?vue&type=script&lang=js\"\nexport * from \"./MsgModalComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\主線任務\\\\第六週主線\\\\nodeCourse_W6_Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProfileView.vue?vue&type=template&id=aa665ee2\"\nimport script from \"./ProfileView.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileView.vue?vue&type=script&lang=js\"\n\nimport \"./ProfileView.vue?vue&type=style&index=0&id=aa665ee2&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\主線任務\\\\第六週主線\\\\nodeCourse_W6_Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","process","apiUserSignUp","data","axios","apiUserSignIn","apiUpdatePassword","apiGetProfile","apiUpdateProfile","apiGetPosts","params","apiGetPost","id","apiCreatePost","apiDelPost","defineStore","state","modal","type","title","content","actions","toggleDelModal","item","this","bsModal","show","toggleMsgModal","closeDelModal","hide","status","statusStore","profile","name","photo","gender","_id","tempProfile","getProfile","isLoading","then","res","Object","assign","catch","err","pushMessage","style","response","message","clearToken","router","updateProfileData","_createElementVNode","class","role","for","_hoisted_1","onClick","$options","_createVNode","_component_VForm","enctype","onSubmit","ref","errors","meta","_ctx","_createElementBlock","backgroundImage","_hoisted_8","_component_VField","placeholder","rules","$event","required","_component_error_message","_hoisted_10","_hoisted_12","value","_hoisted_14","_hoisted_16","_hoisted_17","disabled","valid","_hoisted_18","_hoisted_21","$data","password","_hoisted_23","confirmPassword","_hoisted_24","_component_MsgModalComponent","default","_toDisplayString","tabindex","_renderSlot","_hoisted_5","__exports__","tempPassword","methods","toggleForm","$refs","passwordForm","resetForm","updateProfile","toggleLoading","user","updatePassword","mapActions","userStore","modalStore","computed","mapState","components","MsgModalComponent","render"],"sourceRoot":""}